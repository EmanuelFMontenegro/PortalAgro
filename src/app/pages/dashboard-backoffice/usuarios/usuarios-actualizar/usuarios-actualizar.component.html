<!-- <app-header-user [selectedName]="formData.name || null" [selectedLastName]="formData.lastname || null"
  [selectedEmail]="formData.userResponseDTO?.username || null"
  [selectedRole]="formData.userResponseDTO?.role?.name || null">
</app-header-user>

<div class="form-container">
  <form [formGroup]="userForm">
    <div class="field-container">
      <div class="field-group">
        <div class="field-group">
          <label class="field-label">Usuario</label>
          <input type="text" placeholder="Usuario" formControlName="username" class="field-input">
        </div>
        <div class="field-group">
          <label class="field-label">Contraseña</label>
          <input type="password" placeholder="Contraseña" formControlName="password" class="field-input">
        </div>
        <label class="field-label">Nombre</label>
        <input type="text" placeholder="Nombre" formControlName="name" class="field-input">
      </div>
      <div class="field-group">
        <label class="field-label">Apellido</label>
        <input type="text" placeholder="Apellido" formControlName="lastname" class="field-input">
      </div>
      <div class="field-group">
        <label class="field-label">DNI</label>
        <input type="text" placeholder="DNI" formControlName="dni" class="field-input">
      </div>
      <!-- Campos específicos por tipo de usuario -->
 <!-- <div *ngIf="userType === 'cooperative'">
        <div class="field-group">
          <label class="field-label">Departamento Asignado</label>
          <select formControlName="assignedDepartment" class="field-input">
            <option value="">Seleccione departamento</option>  -->
<!-- Aquí puedes iterar sobre los departamentos disponibles -->
 <!-- <option *ngFor="let department of departamentos" [value]="department.id">{{ department.name }}</option>
          </select>
        </div>
        <div class="field-group">
          <label class="field-label">Función</label>
          <input type="text" placeholder="Función" formControlName="function" class="field-input">
        </div>
        <div class="field-group">
          <label class="field-label">Razón Social</label>
          <input type="text" placeholder="Razón Social" formControlName="businessName" class="field-input">
        </div>
        <div class="field-group">
          <label class="field-label">Dirección</label>
          <input type="text" placeholder="Dirección" formControlName="address" class="field-input">
        </div>
        <div class="field-group">
          <label class="field-label">CUIT</label>
          <input type="text" placeholder="CUIT" formControlName="cuit" class="field-input">
        </div>
      </div>
      <div *ngIf="userType === 'technical'">
        <div class="field-group">
          <label class="field-label">Departamento Asignado</label>
          <select formControlName="assignedDepartment" class="field-input">
            <option value="">Seleccione departamento</option> -->
<!-- Aquí puedes iterar sobre los departamentos disponibles -->
 <!-- <option *ngFor="let department of departamentos" [value]="department.id">{{ department.name }}</option>
          </select>
        </div>
        <div class="field-group">
          <label class="field-label">Función</label>
          <input type="text" placeholder="Función" formControlName="function" class="field-input">
        </div>
        <div class="field-group">
          <label class="field-label">Especialidad</label>
          <input type="text" placeholder="Especialidad" formControlName="specialty" class="field-input">
        </div>
      </div> -->
      <!-- <div *ngIf="userType === 'operator'">
        <div class="field-group">
          <label class="field-label">Departamento Asignado</label>
          <select formControlName="assignedDepartment" class="field-input">
            <option value="">Seleccione departamento</option>  -->
<!-- Aquí puedes iterar sobre los departamentos disponibles -->
 <!-- <option *ngFor="let department of departamentos" [value]="department.id">{{ department.name }}</option>
          </select>
        </div>
        <div class="field-group">
          <label class="field-label">Función</label>
          <input type="text" placeholder="Función" formControlName="function" class="field-input">
        </div>
        <div class="field-group">
          <label class="field-label">Especialidad</label>
          <input type="text" placeholder="Especialidad" formControlName="specialty" class="field-input">
        </div>
        <div class="field-group">
          <label class="field-label">Matrícula</label>
          <input type="text" placeholder="Matrícula" formControlName="registration" class="field-input">
        </div>
        <div class="field-group">
          <label class="field-label">Licencia</label>
          <input type="text" placeholder="Licencia" formControlName="license" class="field-input">
        </div>
 </div>
    </div>

  </form>
</div> -->

 <!-- <div class="botones-form">
  <button mat-raised-button class="crear-button" (click)="enviarFormulario()">Actualizar usuario</button>
  <button mat-raised-button class="cancelar-button" (click)="cancelar()">Cancelar</button>
</div>  -->






//MAS CODIGO OPCIONAL

<app-header-user
  [selectedName]="formData.name || null"
  [selectedLastName]="formData.lastname || null"
  [selectedEmail]="formData.userResponseDTO?.username || null"
  [selectedRole]="formData.userResponseDTO?.role?.name || null"
  [departmentNames]="getDepartmentNames()"
></app-header-user>



<div class="form-container">
  <form [formGroup]="userForm">
    <div class="field-container">
      <div class="field-group">
        <div class="field-group">
          <label class="field-label">Usuario</label>
          <input type="text" placeholder="Usuario" formControlName="username" class="field-input">
        </div>
        <div class="field-group">
          <label class="field-label">Contraseña</label>
          <input type="password" placeholder="Contraseña" formControlName="password" class="field-input">
        </div>
        <label class="field-label">Nombre</label>
        <input type="text" placeholder="Nombre" formControlName="name" class="field-input">
      </div>
      <div class="field-group">
        <label class="field-label">Apellido</label>
        <input type="text" placeholder="Apellido" formControlName="lastname" class="field-input">
      </div>
      <div class="field-group">
        <label class="field-label">DNI</label>
        <input type="text" placeholder="DNI" formControlName="dni" class="field-input">
      </div>

      <!-- Selección dinámica de departamentos -->
      <div>
        <div class="field-group">
          <label class="field-label">Departamento Asignado</label>
          <mat-form-field class="list-chip-grid">
            <mat-label>Departamentos</mat-label>


            
            <!-- MatChipGrid para mostrar los departamentos seleccionados -->
            <mat-chip-grid #chipGrid>
              <mat-chip-row *ngFor="let department of departamentosSeleccionados" (removed)="remove(department)">
                {{ department.name }}
                <button matChipRemove>
                  <mat-icon>cancel</mat-icon>
                </button>
              </mat-chip-row>
            </mat-chip-grid>



            <!-- Input para agregar nuevos departamentos -->
            <input placeholder="Nuevo Departamento..." #departmentInput [formControl]="departmentCtrl"
                   [matChipInputFor]="chipGrid" [matAutocomplete]="auto"
                   [matChipInputSeparatorKeyCodes]="separatorKeysCodes" (matChipInputTokenEnd)="addDepartment($event)"/>

            <!-- Autocompletado de departamentos -->
            <mat-autocomplete #auto="matAutocomplete" (optionSelected)="selected($event)">
              <mat-option *ngFor="let department of filteredDepartments | async" [value]="department">
                {{department.name}}
              </mat-option>
            </mat-autocomplete>
          </mat-form-field>
        </div>
      </div>
    </div>
  </form>
</div>

<div class="botones-form">
  <button mat-raised-button class="crear-button" (click)="enviarFormulario()">Actualizar usuario</button>
  <button mat-raised-button class="cancelar-button" (click)="cancelar()">Cancelar</button>
</div>





















    <!-- </div>

  </form>
</div> -->

<!-- <div class="botones-form">
  <button mat-raised-button class="crear-button" (click)="enviarFormulario()">Actualizar usuario</button>
  <button mat-raised-button class="cancelar-button" (click)="cancelar()">Cancelar</button>
</div>  -->
