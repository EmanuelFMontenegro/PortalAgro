<div class="container">
  <div class="titulo-perfil">
    <span class="titulo-perfil">¡Bienvenido, Acá podrás gestionar, los lotes de los Productores</span>
  </div>
  <mat-card class="main-card">
    <div class="card user-card">
      <div class="user-content">
        <div class="avatar">
          <div class="avatar-circle">
            <mat-icon class="avatar-icon">person</mat-icon>
          </div>
        </div>
        <div class="titulo-perfil-avatar">
          <div class="titulo-welcome">
            <p class="email">Email: {{ userEmail }}</p>
          </div>
        </div>
      </div>
      <h2 class="titulo-chacra">Lotes</h2>
</div>

  <div class="field-container">
    <mat-select class="field-input" placeholder="Filtrar por" [(ngModel)]="filtroSeleccionado"
      (ngModelChange)="aplicarFiltro($event)">
      <mat-option value="localidad">Localidad</mat-option>
      <mat-option value="productor">Productor</mat-option>
      <mat-option value="cultivo">Cultivo</mat-option>
      <mat-option value="hectareas">Hectáreas</mat-option>
    </mat-select>

    <ng-container *ngIf="filtroSeleccionado === 'localidad'">
      <mat-select class="field-input" placeholder="Seleccionar localidad" [(ngModel)]="idLocalidadSeleccionada">
        <mat-option *ngFor="let localidad of localidades" [value]="localidad.id">{{ localidad.name }}</mat-option>
      </mat-select>
    </ng-container>



    <ng-container *ngIf="filtroSeleccionado === 'productor'">
      <input class="field-input" matInput [placeholder]="'Buscar por productor'" [(ngModel)]="nombreProductor">
    </ng-container>

    <ng-container *ngIf="filtroSeleccionado === 'cultivo'">
      <mat-select class="field-input" placeholder="Seleccionar cultivo" [(ngModel)]="cropId">
        <mat-option *ngFor="let cultivo of cultivos" [value]="cultivo.id">{{ cultivo.name }}</mat-option>
      </mat-select>
    </ng-container>




    <ng-container *ngIf="filtroSeleccionado === 'hectareas'">
      <input class="field-input" matInput type="number" placeholder="Min" [(ngModel)]="minHectareas"
        (blur)="validarMinHectareas()">
      <input class="field-input" matInput type="number" placeholder="Max" [(ngModel)]="maxHectareas"
        (blur)="validarMaxHectareas()">
    </ng-container>



    <!-- Botones para limpiar y filtrar -->
    <button mat-raised-button class="clear-button" (click)="limpiarTexto()">Limpiar
      <img src="assets/img/ink_eraser_FILL0_wght400_GRAD0_opsz24.svg"
        style="filter: invert(70%) sepia(60%) saturate(10000%) hue-rotate(130deg)" alt="IconoBorrar">
    </button>

    <button mat-raised-button class="active-button" (click)="filtrar()">Filtrar
      <img src="assets/img/filter_alt_FILL0_wght400_GRAD0_opsz24.svg"
        style="filter: invert(70%) sepia(60%) saturate(10000%) hue-rotate(130deg)" alt="IconoBorrar">
    </button>

    <button mat-raised-button class="nuevaChacra-button" (click)="BtnNuevaChacra()">Volver al Inicio
    </button>
  </div>


  <div class="card-campos-lotes">
    <div class="campo-card" *ngFor="let lote of loteData; let i = index">
      <img class="img_lotes" [src]="'assets/img/lote_' + (i + 1) + '.svg'" alt="Img Lote">
      <p class="with-dot">
        <span class="campo-titulos">Nombre del Lote:</span>
        <span class="campo-variable">{{ lote.name }}</span>
      </p>
      <p class="with-dot">
        <span class="campo-titulos">Plantación:</span>
        <span class="campo-variable">{{ lote.plant_name }}</span>
      </p>
      <p class="with-dot">
        <span class="campo-titulos">Hectáreas:</span>
        <span class="campo-variable">{{ lote.dimensions }}</span>
      </p>
      <p class="with-dot">
        <span class="campo-titulos">Descripción:</span>
        <span class="campo-variable">{{ lote.descriptions }}</span>
      </p>
      <div class="acciones">
        <button mat-icon-button aria-label="verMas"  class="verMas-button" (click)="verMas(lote)">
          <span style="color: #FFFFFF;">Ver Más</span>
        </button>
      </div>
    </div>
  </div>
