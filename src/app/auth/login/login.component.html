<div class="login-container">
  <mat-card class="login-card" *ngIf="!mostrarRegistro">
    <div class="logo-container">
      <img src="../../../assets/img/log_sustentable.png" alt="Logo">
    </div>
    <h1 class="mb-4">Iniciar Sesión</h1>
    <div class="info-text-container">
      <span class="info-text">
        Por favor ingresa el email y la contraseña con los que te registraste.
      </span>
    </div>
    <form [formGroup]="login" (ngSubmit)="enviarFormulario()" class="text-start">
      <input matInput type="email" id="username" [formControl]="usernameControl" placeholder="Correo electrónico">

      <div class="error-container">
        <mat-error *ngIf="usernameControl.invalid && usernameControl.touched">
          <span *ngIf="usernameControl.hasError('required')">El correo electrónico es requerido.</span>
          <span *ngIf="usernameControl.hasError('email')">Ingresa un correo electrónico válido.</span>
        </mat-error>
      </div>

      <div class="password-field-container">
        <input matInput type="password" id="password" [formControl]="passwordControl" placeholder="Contraseña">
        <mat-icon class="toggle-password" (click)="togglePasswordVisibility()">
          {{ passwordVisible ? 'visibility' :'visibility_off' }}
        </mat-icon>
      </div>

      <div class="error-container">
        <mat-error *ngIf="passwordControl.invalid && passwordControl.touched">
          <span *ngIf="passwordControl.hasError('required')">La contraseña es requerida.</span>
          <span *ngIf="passwordControl.hasError('minlength')">La contraseña debe tener al menos 8 caracteres.</span>
          <span *ngIf="loginError">{{ loginError }}</span>
        </mat-error>
      </div>

      <button mat-raised-button type="submit" class="btn-submit mt-3" id="submitBtn"
        [ngClass]="{'enabled': login.valid}" [disabled]="!login.valid">
        Iniciar Sesión
      </button>



      <div class="login-links mt-3">
        <div class="login-prompt">
          ¿No tienes cuenta?<a routerLink="/registro" class="login-link">Regístrate</a>
        </div>
        <div class="login-prompt">
          <a routerLink="/recuper-contrasena" class="login-link">Recuperar Contraseña</a>
        </div>
      </div>
    </form>
  </mat-card>
</div>