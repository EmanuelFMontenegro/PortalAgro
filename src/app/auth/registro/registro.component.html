<div class="register-container">
  <mat-card class="register-card" [ngStyle]="{'height': hasErrors ? 'auto' : '550px'}">
    <div class="logo-container">
      <img src="../../../assets/img/log_sustentable_gris.png" alt="Logo">
    </div>
    <h1 class="mb-4">Regístrate</h1>

    <form [formGroup]="registro" (ngSubmit)="enviarFormulario()" class="text-start">
      <!-- Campo de Correo Electrónico -->
      <div class="form-field-container">
        <input matInput type="text" id="username" [formControl]="usernameControl" placeholder="Correo electrónico"
          class="input-style">
        <mat-error *ngIf="usernameControl.invalid && usernameControl.touched">
          <span *ngIf="usernameControl.hasError('required')">El correo electrónico es requerido.</span>
          <span *ngIf="usernameControl.hasError('email')">Ingrese un correo electrónico válido.</span>
        </mat-error>
      </div>

      <!-- Campo de Contraseña primer input -->
      <div class="form-field-container">
        <input matInput type="password" id="password" [formControl]="passwordControl" placeholder="Contraseña"
          class="input-style">

        <mat-error *ngIf="passwordControl.invalid && passwordControl.touched">
          <span *ngIf="passwordControl.hasError('required')">La contraseña es requerida.</span>
          <span *ngIf="passwordControl.hasError('minlength')">La contraseña debe tener al menos 8 caracteres.</span>
        </mat-error>
      </div>


      <!-- Campo de Contraseña segundo input -->
      <div class="form-field-container">
        <input matInput type="password" id="confirmPassword" [formControl]="confirmPasswordControl"
          placeholder="Confirmar Contraseña" class="input-style">
        <mat-icon style="width: auto; height:auto;" class="toggle-password" (click)="togglePasswordVisibility()">
          {{ passwordVisible ? 'visibility':'visibility_off' }}
        </mat-icon>
        <mat-error *ngIf="confirmPasswordControl.invalid && confirmPasswordControl.touched">
          <span *ngIf="confirmPasswordControl.errors?.['passwordsNotMatch']">Las contraseñas no coinciden.</span>
          <span
            *ngIf="confirmPasswordControl.hasError('required') && !confirmPasswordControl.errors?.['passwordsNotMatch']">La
            contraseña es requerida.</span>
          <span
            *ngIf="confirmPasswordControl.hasError('minlength') && !confirmPasswordControl.errors?.['passwordsNotMatch']">La
            contraseña debe tener al menos 8 caracteres.</span>
        </mat-error>
      </div>

      <div *ngIf="cargandoValidacion" class="overlay">
        <div *ngIf="cargandoValidacion" class="lds-ellipsis">
          <div></div>
          <div></div>
          <div></div>
          <div></div>
        </div>
      </div>


      <!-- Botón de Registro -->
      <button mat-raised-button type="submit" class="btn-block mt-3" [disabled]="cargandoValidacion">
        Registrarse
      </button>

      <!-- Enlaces de Inicio de Sesión -->
      <div class="login-links mt-3">
        <div class="login-prompt">
          ¿Ya tienes cuenta? <a routerLink="/login" class="login-link" (click)="irAInicioSesion()">Iniciar Sesión</a>
        </div>
      </div>
    </form>
  </mat-card>
</div>
